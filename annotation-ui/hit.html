<!DOCTYPE html>
<html>
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-28926290-65"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-28926290-65');
        </script>
        <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
        <script type='text/javascript' src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js'></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link href="https://use.fontawesome.com/releases/v5.0.4/css/all.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/EaselJS/1.0.2/easeljs.min.js" integrity="sha256-m4ldXda61DCZVuvCEAAZeHlAsDkeMEMtrH68df1sxME=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/plyr/2.0.18/plyr.js" integrity="sha256-d3zbxocNfS7I0jy36Z8prRbhIPcXZabOIJFDpnO2RNs=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/plyr/2.0.18/plyr.css" integrity="sha256-fZCJMY30eNC8ftYfOWmEXhSd41kVy5RDrZOK9dlQnqg=" crossorigin="anonymous" />
    </head>
    <body>
        <div class="container">
            <h1>Motion Relationship Labelling Task</h1>
            <p>Please label the motion relationship between objects which have a <span class="text-danger">red</span> box around them.</p>
            <p>You can replay the video as many times as you want.</p>

            <h3>Relationship types explained</h3>
            <ul>
                <li><b>No relationship (default)</b> - the two entities do not affect each other. If you do not label a relationship between two objects, this is the default label that will be assigned.</li>
                <li><b>Gives way to </b>- Entity A waits and gives way for entity B to pass</li>
                <li><b>Moves together as a group </b>- Entity A and B are related semantically and move together. E.g. a child following its parents, or a couple walking together. However, two cars which just happen to drive side by side on a highway does necessarily mean that they are moving as a group.</li>
                <li><b>Avoids </b>- Entity A diverts its path to avoid colliding with Entity B</li>
                <li><b>Unsure </b>- If you are unsure what to label the relationship as, please select this option.</li>
            </ul>

            <div class="alert alert-info">
                <h4 class="alert-heading">Annotation Controls</h4>
                <ul>
                    <li>
                            Pause the video at any point and hover over the red boxes to see the ID of the entity. Drag a line between two boxes by holding left-click to annotate the relationship between the two objects.
                    </li>
                    <li>You can use the <code>Space</code> key to pause/play the video</li>
                    <li>Below the video you can delete and edit your annotations</li>
                    <li>View an <a href="https://s3.amazonaws.com/amt-motion-relationships/tutorial/annotation-tool.mp4" target="_blank">example video <i class="fas fa-video"></i></a> of how to complete the task.</li>
                </ul>
            </div>
            <div id="video-container" class="loading">
                <div class="load-overlay">                    
                    <div style="height: 100%" class="row justify-content-center align-items-center">
                        <i class="fas fa-spinner fa-pulse"></i>
                    </div>
                </div>
                <canvas id="overlay"></canvas>
                <video
                        id="video"
                        data-plyr='{ "hideControls": false, "fullscreen": false }'
                        controls>
                </video>
            </div>
            <div style="height: 1em"></div>

            <h3>Your Annotations</h3>
            <form name='mturk_form' method='post' id='mturk_form' action=''>
                <input type='hidden' value='' name='assignmentId' id='assignmentId'/>
                <input type='hidden' value='' name='videoId' id='videoId'/>
                
                <table class="table" id="annotations-container">
                    <thead>
                        <tr>
                            <th scope="col">Start ID</th>
                            <th scope="col">Relationship</th>
                            <th scope="col">End ID</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <p>Finished labelling all relationships? Click the submit button to finish the HIT.</p>
                <div class="form-group">
                    <label>Any feedback or comments on this HIT? (Optional)</label>
                    <textarea class="form-control" name="feedback" id="" placeholder="Your comments..."></textarea>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" type="submit">Submit</button>
                </div>
            </form>
        </div>

        <div id="annotation-popup"></div>
    </body>
    <script language='Javascript'>turkSetAssignmentID();</script>
</html>
